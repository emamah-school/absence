<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø³Ø¬Ù„Ø§Øª Ø§Ù„ØºÙŠØ§Ø¨ - Ù†Ø¸Ø§Ù… Ø§Ù„ØºÙŠØ§Ø¨ Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠ</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
 :root {
    --primary: #4361ee;
    --secondary: #3f37c9;
    --success: #4cc9f0;
    --warning: #f72585;
    --danger: #e63946;
    --light: #f8f9fa;
    --dark: #212529;
    --gray: #6c757d;
    --absence: #e63946;        /* Ø£Ø­Ù…Ø± Ù„Ù„ØºÙŠØ§Ø¨ */
    --tasyeeb: #4361ee;        /* Ø£Ø²Ø±Ù‚ Ù„Ù„ØªØ£Ø®ÙŠØ± */
    --tasayob: #f77f00;        /* Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ ØºØ§Ù…Ù‚ Ù„Ù„ØªØ³ÙŠÙ‘Ø¨ */
    --esteathan: #9b5de5;      /* Ø¨Ù†ÙØ³Ø¬ÙŠ Ù„Ù„Ø¥Ø³ØªØ¦Ø°Ø§Ù† */
    --highlight: #ff9500;
}
 .zoom-overlay {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.85);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.3s ease;
}
.zoom-overlay.show {
  opacity: 1;
  visibility: visible;
}
.zoom-overlay img {
  max-width: 90%;
  max-height: 90%;
  border-radius: 10px;
  box-shadow: 0 0 25px rgba(0,0,0,0.5);
}
.zoom-close-btn {
  position: absolute;
  top: 20px;
  left: 20px;
  background: #e63946;
  color: white;
  border: none;
  padding: 10px 16px;
  border-radius: 6px;
  font-size: 0.9rem;
  cursor: pointer;
  font-weight: bold;
  box-shadow: 0 2px 10px rgba(0,0,0,0.3);
  transition: background 0.3s;
}
.zoom-close-btn:hover {
  background: #c62828;
}  
/* ØªØ­Ø¯ÙŠØ« Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø­Ø§Ù„Ø© Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù†Øµ ÙƒØ§Ù…Ù„Ø§Ù‹ */
.records-table td:nth-child(9) { /* Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø­Ø§Ù„Ø© */
    min-width: 120px; /* ØªÙˆØ³Ø¹Ø© Ø§Ù„Ø¹Ù…ÙˆØ¯ */
    max-width: 150px;
    word-wrap: break-word;
    line-height: 1.3;
}

/* ØªØ­Ø¯ÙŠØ« Ø¹Ù…ÙˆØ¯ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø© */
.records-table td:nth-child(10) { /* Ø¹Ù…ÙˆØ¯ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø© */
    max-width: 200px;
    min-width: 150px;
    white-space: normal !important;
    word-wrap: break-word;
    word-break: break-word;
    line-height: 1.4;
    padding: 8px 10px;
}

/* ØªØ­Ø¯ÙŠØ« Ø¹Ù…ÙˆØ¯ Ø§Ù„Ù…Ø±ÙÙ‚ */
.records-table td:nth-child(11) { /* Ø¹Ù…ÙˆØ¯ Ø§Ù„Ù…Ø±ÙÙ‚ */
    min-width: 100px;
    max-width: 120px;
    text-align: center;
}

/* Ø±Ø¤ÙˆØ³ Ø§Ù„Ø¬Ø¯ÙˆÙ„ ÙˆØ§Ù„Ø®Ù„Ø§ÙŠØ§ */
table th,
table td {
  text-align: center !important;      /* â† ØªÙˆØ³ÙŠØ· Ø£ÙÙ‚ÙŠ */
  vertical-align: middle !important;  /* â† ØªÙˆØ³ÙŠØ· Ø¹Ù…ÙˆØ¯ÙŠ */
  border: 1px solid black !important;
  padding: 8px 10px !important;
}

/* ØªØ­Ø¯ÙŠØ« Ø®Ù„ÙŠØ© Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨Ø© Ù„ÙƒØ³Ø± Ø§Ù„Ù†Øµ Ø§Ù„Ø·ÙˆÙŠÙ„ */
.records-table td:nth-child(4) { /* Ø¹Ù…ÙˆØ¯ Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨Ø© */
    max-width: 170px;
    min-width: 150px;
    white-space: normal !important; /* Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨ÙƒØ³Ø± Ø§Ù„Ø³Ø·ÙˆØ± */
    word-wrap: break-word; /* ÙƒØ³Ø± Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø·ÙˆÙŠÙ„Ø© */
    word-break: break-word; /* ÙƒØ³Ø± Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø© */
    line-height: 1.4;
    padding: 8px 15px; /* Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø­Ø´Ùˆ Ù‚Ù„ÙŠÙ„Ø§Ù‹ Ù„Ù„Ø±Ø§Ø­Ø© Ø§Ù„Ø¨ØµØ±ÙŠØ© */
}

/* âœ… Ø´Ø¨ÙƒØ© Ø³ÙˆØ¯Ø§Ø¡ Ù„Ø¬Ù…ÙŠØ¹ Ø®Ù„Ø§ÙŠØ§ Ø§Ù„Ø¬Ø¯ÙˆÙ„ */
table {
  width: 100% !important;
  border-collapse: collapse !important;
  table-layout: auto !important;
  border: 2px solid black !important; /* â† Ø¥Ø·Ø§Ø± Ø®Ø§Ø±Ø¬ÙŠ Ø£Ø³ÙˆØ¯ */
}

/* Ø±Ø¤ÙˆØ³ Ø§Ù„Ø¬Ø¯ÙˆÙ„ */
table thead th {
  background-color: #1a365d !important; /* â† Ø£Ø²Ø±Ù‚ ØºØ§Ù…Ù‚ */
  color: #ffffff !important;            /* â† Ù†Øµ Ø£Ø¨ÙŠØ¶ */
  font-weight: 700 !important;
  border: 1px solid #000000 !important; /* â† Ø­Ø¯ÙˆØ¯ Ø§Ù„Ø±Ø£Ø³ Ø³ÙˆØ¯Ø§Ø¡ Ø£ÙŠØ¶Ù‹Ø§ */
  padding: 6px 8px !important;
}

/* ØªÙØ§Ø¹Ù„ Ø¹Ù†Ø¯ Ø§Ù„Ù…Ø±ÙˆØ± */
table tr:hover {
  background-color: #FEF6DD !important;
  transition: background-color 0.2s ease;
}

.form-input:disabled {
    background-color: #f8f9fa;
    cursor: not-allowed;
    opacity: 0.7;
}

.form-input:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
    background-color: white;
}

.status-absence {
    background-color: rgba(230, 57, 70, 0.1);
    color: var(--absence);
    border: 1px solid rgba(230, 57, 70, 0.3);
}

.status-tasyeeb {
    background-color: rgba(67, 97, 238, 0.1);
    color: var(--tasyeeb);
    border: 1px solid rgba(67, 97, 238, 0.3);
}

.status-tasayob {
    background-color: rgba(247, 127, 0, 0.1);
    color: var(--tasayob);
    border: 1px solid rgba(247, 127, 0, 0.3);
}

.status-esteathan {
    background-color: rgba(155, 93, 229, 0.1);
    color: var(--esteathan);
    border: 1px solid rgba(155, 93, 229, 0.3);
}

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Tajawal', sans-serif;
            font-weight: 700; /* Ø®Ø· Ø¹Ø±ÙŠØ¶ Ù„Ù„ØªØ·Ø¨ÙŠÙ‚ ÙƒØ§Ù…Ù„Ø§Ù‹ */
        }
        
        body {
            color: var(--dark);
            line-height: 1.6;
            background-color: #f5f7fb;
            font-weight: 700; /* Ø®Ø· Ø¹Ø±ÙŠØ¶ */
        }
        
        .container {
            width: 100%;
            max-width: 1500px;
            margin: 0 auto;
            padding: 0 15px;
Font-Family: Arial
        }
      
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 1.2rem 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
Font-Family: Arial
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo i {
            font-size: 1.8rem;
        }
        
        .logo h1 {
            font-size: 1.6rem;
            font-weight: 700;
        }
        
        .nav-links {
            display: flex;
            gap: 15px;
        }
        
        .nav-link {
            color: white;
            text-decoration: none;
            padding: 6px 12px;
            border-radius: 6px;
            transition: background-color 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.9rem;
        }
        
        .nav-link:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        .main-content {
            margin: 1.5rem 0;
        }
        
        .records-section {
            background: white;
            border-radius: 12px;
            padding: 1.2rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }
        
        .section-title {
            font-size: 1.3rem;
            margin-bottom: 1rem;
            padding-bottom: 8px;
            border-bottom: 2px solid #eee;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 700; /* Ø®Ø· Ø¹Ø±ÙŠØ¶ */
Font-Family: Arial
        }
        
        /* Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…ØªØ·ÙˆØ± */
        .search-container {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 1.2rem;
            margin-bottom: 1.2rem;
            border: 1px solid #eee;
Font-Family: Arial
        }
        
        .search-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
Font-Family: Arial
        }
        
        .search-title {
            font-size: 1.1rem;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .search-title i {
            font-size: 1rem;
Font-Family: Arial
        }
        
        .search-results-count {
            font-size: 0.85rem;
            color: var(--gray);
            background: white;
            padding: 4px 10px;
            border-radius: 20px;
            border: 1px solid #eee;
        }
        
        .search-input-container {
            position: relative;
            margin-bottom: 1rem;
        }
        
        .search-input {
            width: 100%;
            padding: 10px 45px 10px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            background-color: white;
        }
        
        .search-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
        }
        
        .search-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
            font-size: 1rem;
        }
        
        .search-clear {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--gray);
            cursor: pointer;
            font-size: 1rem;
            padding: 4px;
            border-radius: 4px;
            display: none;
        }
        
        .search-clear:hover {
            background-color: rgba(0, 0, 0, 0.05);
            color: var(--danger);
        }
        
        .search-clear.visible {
            display: block;
        }
        
        .search-filters {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .filter-group {
            flex: 1;
            min-width: 150px;
        }
        
        .filter-label {
            display: block;
            margin-bottom: 6px;
            font-size: 0.85rem;
            color: var(--gray);
            font-weight: 500;
        }
        
        .filter-select {
            width: 100%;
            padding: 8px 12px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 0.85rem;
            background-color: white;
            cursor: pointer;
            font-weight: 700; /* Ø®Ø· Ø¹Ø±ÙŠØ¶ */
Font-Family: Arial
        }
        
        .filter-select:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .tabs {
            display: flex;
            margin-bottom: 1.2rem;
            border-bottom: 1px solid #eee;
            background: #f8f9fa;
            border-radius: 8px;
            padding: 4px;
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            border-radius: 6px;
            flex: 1;
            text-align: center;
            font-size: 0.9rem;
        }
        
        .tab.active {
            background: var(--primary);
            color: white;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
       /* ØªØ­Ø¯ÙŠØ« Ø­Ø¯ÙˆØ¯ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø³Ø¬Ù„Ø§Øª Ø¨Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø³ÙˆØ¯ */
.records-table-container {
    overflow-x: auto;
    border-radius: 8px;
    border: 2px solid #000; /* Ø­Ø¯ÙˆØ¯ Ø³ÙˆØ¯Ø§Ø¡ */
    max-height: 500px;
    overflow-y: auto;
}

.stat-label {
    font-size: 0.75rem;
    color: var(--gray);
    font-weight: 700; /* Ø®Ø· Ø¹Ø±ÙŠØ¶ */
Font-Family: Arial
}  

.records-table {
    width: 100%;
    border-collapse: collapse;
    min-width: 1000px;
    border: 1px solid #000; /* Ø­Ø¯ÙˆØ¯ Ø³ÙˆØ¯Ø§Ø¡ Ù„Ù„Ø¬Ø¯ÙˆÙ„ */
Font-Family: Arial
}

.records-table th {
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    color: white;
    padding: 12px 10px;
    text-align: right;
    font-weight: 600;
    position: sticky;
    top: 0;
    z-index: 10;
    font-size: 0.85rem;
    white-space: nowrap;
    border-left: 1px solid #000; /* Ø­Ø¯ÙˆØ¯ Ø¬Ø§Ù†Ø¨ÙŠØ© Ø³ÙˆØ¯Ø§Ø¡ */
    border-right: 1px solid #000; /* Ø­Ø¯ÙˆØ¯ Ø¬Ø§Ù†Ø¨ÙŠØ© Ø³ÙˆØ¯Ø§Ø¡ */
}

.records-table td {
    padding: 10px 12px;
    text-align: right;
    border-bottom: 1px solid #eee;
    font-size: 0.85rem;
    max-width: 200px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    transition: all 0.3s ease;
}

.records-table td.expandable:hover {
    white-space: normal;
    overflow: visible;
    background-color: #f8f9fa;
    z-index: 5;
    position: relative;
    box-shadow: 0 0 5px rgba(0,0,0,0.1);
}

.records-table tr:hover {
    background-color: #f8f9fa;
}

.records-table tr:nth-child(even) {
    background-color: #fafafa;
}

.records-table tr:nth-child(even):hover {
    background-color: #f1f3f4;
}

.status-badge {
    display: inline-block;
    padding: 5px 10px;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 700; /* Ø®Ø· Ø¹Ø±ÙŠØ¶ */
Font-Family: Arial
}  

.status-absence {
    background-color: rgba(247, 37, 133, 0.1);
    color: var(--absence);
    border: 1px solid rgba(247, 37, 133, 0.3);
}

.status-tasyeeb {
    background-color: rgba(76, 201, 240, 0.1);
    color: var(--tasyeeb);
    border: 1px solid rgba(76, 201, 240, 0.3);
}

.status-tasayob {
    background-color: rgba(255, 145, 0, 0.1);
    color: var(--tasayob);
    border: 1px solid rgba(255, 145, 0, 0.3);
}

.status-esteathan {
    background-color: rgba(155, 93, 229, 0.1);
    color: var(--esteathan);
    border: 1px solid rgba(155, 93, 229, 0.3);
}

.reviewed-badge {
    display: inline-block;
    padding: 5px 10px;
    border-radius: 20px;
    font-size: 0.3rem;
    font-weight: 500;
}

.reviewed-yes {
  font-size: 1.1rem;                     /* Ø­Ø¬Ù… Ø§Ù„Ø®Ø·  Ø¨Ø¹Ø°Ø± Ø¨Ø¯ÙˆÙ† Ø¹Ø°Ø±*/
  font-family: Arial, sans-serif;        /* Ù†ÙˆØ¹ Ø§Ù„Ø®Ø· */
 
  color: #389D1D;                        /* Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø®Ø¶Ø± */
  font-weight: 700;                      /* Ø®Ø· Ø¹Ø±ÙŠØ¶ */
 border: 1px solid #18D55A; /* Ø£Ø®Ø¶Ø± */
}

.reviewed-no {
   font-size: 1.1rem;                     /* Ø­Ø¬Ù… Ø§Ù„Ø®Ø· */
  font-family: Arial, sans-serif;        /* Ù†ÙˆØ¹ Ø§Ù„Ø®Ø· */

  color:#E74F4F;                        /* Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø­Ù…Ø± */
  font-weight: 700;                      /* Ø®Ø· Ø¹Ø±ÙŠØ¶ */
border: 1px solid #e63946; /* Ø£Ø­Ù…Ø± */
}

.action-buttons {
    display: flex;
    gap: 5px;
    justify-content: flex-start;
}

.btn-icon {
    background: none;
    border: none;
    cursor: pointer;
    font-size: 0.9rem;
    padding: 4px;
    border-radius: 4px;
    transition: all 0.3s ease;
}

.btn-edit {
    color: var(--primary);
}

.btn-edit:hover {
    background-color: rgba(67, 97, 238, 0.1);
}

.btn-whatsapp {
    color: #25D366;
}

.btn-whatsapp:hover {
    background-color: rgba(37, 211, 102, 0.1);
}

.btn-review {
    color: #e63946; /* Ø£Ø­Ù…Ø± */
}

.btn-review:hover {
    background-color: rgba(46, 139, 87, 0.1); /* Ø£Ø®Ø¶Ø± ØºØ§Ù…Ù‚ Ù…Ø¹ Ø´ÙØ§ÙÙŠØ© */
}

.btn-unreview {
 color: #19C555; /* Ø£Ø®Ø¶Ø± ØºØ§Ù…Ù‚ */
  
}

.btn-unreview:hover {
 background-color: rgba(230, 57, 70, 0.1); /* Ø£Ø­Ù…Ø± Ù…Ø¹ Ø´ÙØ§ÙÙŠØ© */
}

.btn-delete {
    color: var(--danger);
}

.btn-delete:hover {
    background-color: rgba(230, 57, 70, 0.1);
}

.loading {
    display: inline-block;
    width: 18px;
    height: 18px;
    border: 2px solid #f3f3f3;
    border-top: 2px solid var(--primary);
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

.empty-state {
    text-align: center;
    padding: 1.5rem;
    color: var(--gray);
}

.empty-state i {
    font-size: 2.5rem;
    margin-bottom: 0.8rem;
    opacity: 0.5;
}

footer {
    text-align: center;
    padding: 1rem 0;
    margin-top: 1.5rem;
    color: var(--gray);
    border-top: 1px solid #eee;
}

.stats-summary {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 10px;
    margin-bottom: 1.2rem;
    border: 2px solid var(--primary); /* Ø­Ø¯ÙˆØ¯ Ø²Ø±Ù‚Ø§Ø¡ */
}

.stat-item {
    background: white;
    padding: 0.7rem;
    border-radius: 8px;
    text-align: center;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
    border: 1px solid #e0e0e0; /* Ø­Ø¯ÙˆØ¯ ÙØ§ØªØ­Ø© Ù„Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ© */
}

.stat-number {
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--primary);
    margin-bottom: 3px;
}

.stat-label {
    font-size: 0.75rem;
    color: var(--gray);
}

.highlight {
    background-color: var(--highlight);
    color: white;
    padding: 1px 3px;
    border-radius: 3px;
    font-weight: 600;
}

/* Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ */
.edit-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 2000;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
}

.edit-modal.show {
    opacity: 1;
    visibility: visible;
}

.edit-modal-content {
    background: white;
    border-radius: 10px;
    padding: 1.5rem;
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
    max-width: 500px;
    width: 90%;
    transform: translateY(20px);
    transition: transform 0.3s ease;
}

.edit-modal.show .edit-modal-content {
    transform: translateY(0);
}

.edit-modal-title {
    font-size: 1.2rem;
    margin-bottom: 1rem;
    color: var(--primary);
    display: flex;
    align-items: center;
    gap: 8px;
}

.edit-form {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.form-group {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.form-label {
    font-weight: 500;
    color: var(--dark);
    font-size: 0.9rem;
}

.form-input, .form-select {
    padding: 10px 12px;
    border: 1px solid #ddd;
    border-radius: 6px;
    font-size: 0.9rem;
    transition: border 0.3s ease;
}

.form-input:focus, .form-select:focus {
    outline: none;
    border-color: var(--primary);
}

.edit-modal-buttons {
    display: flex;
    gap: 10px;
    justify-content: flex-end;
    margin-top: 1rem;
}

.btn {
    padding: 8px 16px;
    border: none;
    border-radius: 6px;
    font-size: 0.9rem;
    cursor: pointer;
    transition: all 0.3s ease;
}

.btn-primary {
    background: var(--primary);
    color: white;
}

.btn-primary:hover {
    background: var(--secondary);
}

.btn-secondary {
    background: var(--gray);
    color: white;
}

.btn-secondary:hover {
    background: #5a6268;
}

/* Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ© */
.custom-notification {
    position: fixed;
    top: 15px;
    right: 15px;
    background: white;
    color: #333;
    padding: 8px 12px;
    border-radius: 6px;
    box-shadow: 0 3px 12px rgba(0, 0, 0, 0.15);
    z-index: 10000;
    font-size: 0.75rem;
    max-width: 280px;
    transform: translateX(400px);
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    border-left: 3px solid;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
}

.custom-notification.show {
    transform: translateX(0);
}

.custom-notification.hide {
    transform: translateX(400px);
    opacity: 0;
}

.notification-content {
    display: flex;
    align-items: center;
    gap: 8px;
}

.notification-icon {
    width: 18px;
    height: 18px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.75rem;
    flex-shrink: 0;
}

.notification-message {
    flex: 1;
    font-weight: 500;
    line-height: 1.2;
}

.notification-close {
    background: none;
    border: none;
    color: #666;
    cursor: pointer;
    padding: 2px;
    border-radius: 2px;
    transition: all 0.3s ease;
    flex-shrink: 0;
    font-size: 0.7rem;
}

.notification-close:hover {
    background: rgba(0, 0, 0, 0.1);
    color: #333;
}

/* Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª */
.notification-info {
    border-left-color: var(--primary);
    background: linear-gradient(135deg, #f8f9ff, #ffffff);
}

.notification-info .notification-icon {
    background: rgba(67, 97, 238, 0.1);
    color: var(--primary);
}

.notification-success {
    border-left-color: var(--success);
    background: linear-gradient(135deg, #f0f9ff, #ffffff);
}

.notification-success .notification-icon {
    background: rgba(76, 201, 240, 0.1);
    color: var(--success);
}

.notification-warning {
    border-left-color: var(--warning);
    background: linear-gradient(135deg, #fff0f7, #ffffff);
}

.notification-warning .notification-icon {
    background: rgba(247, 37, 133, 0.1);
    color: var(--warning);
}

.notification-error {
    border-left-color: var(--danger);
    background: linear-gradient(135deg, #ffeaea, #ffffff);
}

.notification-error .notification-icon {
    background: rgba(230, 57, 70, 0.1);
    color: var(--danger);
}

/* Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© Ø§Ù„Ù…Ø®ØµØµØ© */
.custom-alert-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 10000;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
    backdrop-filter: blur(2px);
}

.custom-alert-overlay.show {
    opacity: 1;
    visibility: visible;
}

.custom-alert {
    background: white;
    border-radius: 12px;
    padding: 0;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    max-width: 400px;
    width: 90%;
    transform: scale(0.9);
    transition: transform 0.3s ease;
    overflow: hidden;
}

.custom-alert-overlay.show .custom-alert {
    transform: scale(1);
}

.custom-alert-header {
    padding: 1.2rem 1.5rem;
    border-bottom: 1px solid #eee;
    display: flex;
    align-items: center;
    gap: 10px;
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    color: white;
}

.custom-alert-header i {
    font-size: 1.2rem;
}

.custom-alert-title {
    font-size: 1.1rem;
    font-weight: 600;
    margin: 0;
}

.custom-alert-body {
    padding: 1.5rem;
    text-align: center;
}

.custom-alert-message {
    font-size: 0.95rem;
    line-height: 1.5;
    color: var(--dark);
    margin-bottom: 1.5rem;
}

.custom-alert-buttons {
    display: flex;
    gap: 10px;
    justify-content: center;
}

.custom-alert-btn {
    padding: 8px 20px;
    border: none;
    border-radius: 6px;
    font-size: 0.9rem;
    cursor: pointer;
    transition: all 0.3s ease;
    font-weight: 500;
    min-width: 80px;
}

.custom-alert-btn-primary {
    background: var(--primary);
    color: white;
}

.custom-alert-btn-primary:hover {
    background: var(--secondary);
    transform: translateY(-1px);
}

.custom-alert-btn-secondary {
    background: #f8f9fa;
    color: var(--dark);
    border: 1px solid #ddd;
}

.custom-alert-btn-secondary:hover {
    background: #e9ecef;
    transform: translateY(-1px);
}

.custom-alert-btn-danger {
    background: var(--danger);
    color: white;
}

.custom-alert-btn-danger:hover {
    background: #c82333;
    transform: translateY(-1px);
}

/* Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØµØºÙŠØ±Ø© */
.custom-confirm-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.4);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 10000;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
}

.custom-confirm-overlay.show {
    opacity: 1;
    visibility: visible;
}

.custom-confirm {
    background: white;
    border-radius: 10px;
    padding: 1.5rem;
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    max-width: 350px;
    width: 90%;
    transform: translateY(-20px);
    transition: transform 0.3s ease;
    text-align: center;
}

.custom-confirm-overlay.show .custom-confirm {
    transform: translateY(0);
}

.custom-confirm-icon {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: rgba(230, 57, 70, 0.1);
    color: var(--danger);
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 1rem;
    font-size: 1.3rem;
}

.custom-confirm-message {
    font-size: 0.95rem;
    margin-bottom: 1.5rem;
    line-height: 1.5;
    color: var(--dark);
}

.custom-confirm-buttons {
    display: flex;
    gap: 10px;
    justify-content: center;
}

/* Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ù…Ø±ÙÙ‚Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© */
.attachment-container {
    position: relative;
    display: inline-block;
    cursor: pointer;
}

.attachment-thumbnail {
    width: 50px;
    height: 50px;
    object-fit: cover;
    border-radius: 5px;
    border: 2px solid #e0e0e0;
    transition: all 0.3s ease;
}

.attachment-thumbnail:hover {
    border-color: var(--primary);
    transform: scale(1.05);
}

.file-preview {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 8px;
    border: 2px solid #e0e0e0;
    border-radius: 8px;
    background: linear-gradient(135deg, #f8f9fa, #e9ecef);
    transition: all 0.3s ease;
    min-width: 60px;
}

.file-preview:hover {
    border-color: var(--primary);
    background: linear-gradient(135deg, #e3f2fd, #bbdefb);
    transform: scale(1.05);
}

.file-icon {
    font-size: 1.8rem;
    color: #e63946;
    margin-bottom: 5px;
}

.file-text {
    font-size: 0.7rem;
    font-weight: bold;
    color: var(--dark);
}

.attachment-preview-tooltip {
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%) translateY(-10px);
    background: white;
    border: 2px solid var(--primary);
    border-radius: 10px;
    padding: 10px;
    box-shadow: 0 5px 20px rgba(0,0,0,0.2);
    z-index: 1000;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
    min-width: 200px;
    max-width: 300px;
    text-align: center;
}

.attachment-preview-tooltip.show {
    opacity: 1;
    visibility: visible;
    transform: translateX(-50%) translateY(-5px);
}

.preview-image {
    max-width: 250px;
    max-height: 250px;
    border-radius: 5px;
    border: 1px solid #ddd;
}

.preview-pdf {
    padding: 20px;
    background: linear-gradient(135deg, #ffeaea, #ffcccc);
    border-radius: 8px;
    border: 2px dashed #e63946;
}

.preview-pdf-icon {
    font-size: 3rem;
    color: #e63946;
    margin-bottom: 10px;
}

.preview-pdf-text {
    font-weight: bold;
    color: #d32f2f;
    margin-bottom: 5px;
}

.preview-file-name {
    font-size: 0.8rem;
    color: var(--dark);
    word-break: break-word;
}

.preview-student-name {
    font-size: 0.9rem;
    font-weight: bold;
    color: var(--primary);
    margin-top: 8px;
    padding-top: 8px;
    border-top: 1px solid #eee;
}

.attachment-link {
    font-size: 0.7rem;
    color: var(--gray);
    text-decoration: none;
    transition: color 0.2s ease;
    display: block;
    margin-top: 5px;
}

.attachment-link:hover {
    color: var(--primary);
    text-decoration: underline;
}
        
     @media (max-width: 768px) {
    .action-buttons {
        flex-direction: row !important; /* Ø¬Ø¹Ù„Ù‡Ø§ Ø£ÙÙ‚ÙŠØ© */
        flex-wrap: nowrap;
        justify-content: flex-start;
        gap: 4px;
    }

    .nav-links {
        width: 100%;
        justify-content: center;
    }
    
    .search-filters {
        flex-direction: column;
    }
    
    .filter-group {
        min-width: 100%;
    }
    
    .stats-summary {
        grid-template-columns: repeat(2, 1fr);
        gap: 8px;
    }
    
    .stat-item {
        padding: 0.5rem;
    }
    
    .stat-number {
        font-size: 1rem;
    }
    
    .stat-label {
        font-size: 0.7rem;
    }

    .custom-notification {
        right: 8px;
        left: 8px;
        max-width: none;
    }
    
    .records-table td {
        max-width: 120px;
    }
    
    .records-table-container {
        max-height: 400px;
    }

    .attachment-preview-tooltip {
        min-width: 180px;
        max-width: 250px;
    }

    .preview-image {
        max-width: 200px;
        max-height: 200px;
    }
}
.zoom-overlay {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.8);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  cursor: zoom-out;
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.3s ease;
}
.zoom-overlay.show {
  opacity: 1;
  visibility: visible;
}
.zoom-overlay img,
.zoom-overlay iframe {
  max-width: 90%;
  max-height: 90%;
  border-radius: 10px;
  box-shadow: 0 0 25px rgba(0,0,0,0.5);
  background: #fff;
}
    </style>
</head>
<body>
    <!-- Ù†Ø§ÙØ°Ø© ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø³Ø¬Ù„ -->
    <div class="edit-modal" id="editModal">
        <div class="edit-modal-content">
            <h3 class="edit-modal-title">
                <i class="fas fa-edit"></i>
                ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø³Ø¬Ù„
            </h3>
            <form class="edit-form" id="editForm">
                <input type="hidden" id="editRecordId">
                <div class="form-group">
                    <label class="form-label" for="editStudentName">Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨Ø©</label>
                    <input type="text" class="form-input" id="editStudentName" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="editParentPhone">Ø±Ù‚Ù… ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±</label>
                    <input type="tel" class="form-input" id="editParentPhone" required maxlength="8">
                </div>
                <div class="form-group">
                    <label class="form-label" for="editPeriod">Ø§Ù„Ø­ØµØ©</label>
                    <select class="form-select" id="editPeriod" required>
                        <option value="Ø§Ù„Ø­ØµØ© Ø§Ù„Ø£ÙˆÙ„Ù‰">Ø§Ù„Ø­ØµØ© Ø§Ù„Ø£ÙˆÙ„Ù‰</option>
                        <option value="Ø§Ù„Ø­ØµØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©">Ø§Ù„Ø­ØµØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©</option>
                        <option value="Ø§Ù„Ø­ØµØ© Ø§Ù„Ø«Ø§Ù„Ø«Ø©">Ø§Ù„Ø­ØµØ© Ø§Ù„Ø«Ø§Ù„Ø«Ø©</option>
                        <option value="Ø§Ù„Ø­ØµØ© Ø§Ù„Ø±Ø§Ø¨Ø¹Ø©">Ø§Ù„Ø­ØµØ© Ø§Ù„Ø±Ø§Ø¨Ø¹Ø©</option>
                        <option value="Ø§Ù„Ø­ØµØ© Ø§Ù„Ø®Ø§Ù…Ø³Ø©">Ø§Ù„Ø­ØµØ© Ø§Ù„Ø®Ø§Ù…Ø³Ø©</option>
                        <option value="Ø§Ù„Ø­ØµØ© Ø§Ù„Ø³Ø§Ø¯Ø³Ø©">Ø§Ù„Ø­ØµØ© Ø§Ù„Ø³Ø§Ø¯Ø³Ø©</option>
                        <option value="Ø·ÙˆØ§Ù„ Ø§Ù„ÙŠÙˆÙ…">Ø·ÙˆØ§Ù„ Ø§Ù„ÙŠÙˆÙ…</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label" for="editStatus">Ø§Ù„Ø­Ø§Ù„Ø©</label>
                    <select class="form-select" id="editStatus" required>
                        <option value="ØºÙŠØ§Ø¨">ØºÙŠØ§Ø¨</option>
                        <option value="ØªØ£Ø®ÙŠØ± Ø¹Ù† Ø§Ù„Ø­ØµØ©">ØªØ£Ø®ÙŠØ± Ø¹Ù† Ø§Ù„Ø­ØµØ©</option>
                        <option value="ØªØ³ÙŠÙ‘ÙØ¨ Ù…Ù† Ø§Ù„Ø­ØµØ©">ØªØ³ÙŠÙ‘ÙØ¨ Ù…Ù† Ø§Ù„Ø­ØµØ©</option>
                        <option value="Ø¥Ø³ØªØ£Ø°Ø§Ù† Ø®Ø§Ø±Ø¬ Ø§Ù„Ù…Ø¯Ø±Ø³Ø©">Ø¥Ø³ØªØ£Ø°Ø§Ù† Ø®Ø§Ø±Ø¬ Ø§Ù„Ù…Ø¯Ø±Ø³Ø©</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label" for="editNotes">Ù…Ù„Ø§Ø­Ø¸Ø©</label>
                    <textarea class="form-input" id="editNotes" rows="3"></textarea>
                </div>
                <div class="edit-modal-buttons">
                    <button type="button" class="btn btn-secondary" id="cancelEditBtn">Ø¥Ù„ØºØ§Ø¡</button>
                    <button type="submit" class="btn btn-primary" id="saveEditBtn">Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª</button>
                </div>
            </form>
        </div>
    </div>

    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-school"></i>
                    <h1>Ø³Ø¬Ù„Ø§Øª Ø§Ù„ØºÙŠØ§Ø¨</h1>
                </div>
                <div class="nav-links">
                    <a href="index.html" class="nav-link">
                        <i class="fas fa-home"></i>
                        Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                    </a>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <div class="main-content">
            <div class="records-section">
                <h2 class="section-title">
                    <i class="fas fa-history"></i>
                    Ø³Ø¬Ù„Ø§Øª Ø§Ù„ØºÙŠØ§Ø¨ ÙˆØ§Ù„ØªØ£Ø®ÙŠØ±
                </h2>
                
                <div class="stats-summary">
                    <div class="stat-item">
                        <div class="stat-number" id="totalRecords">0</div>
                        <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø³Ø¬Ù„Ø§Øª</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="todayRecordsCount">0</div>
                        <div class="stat-label">Ø³Ø¬Ù„Ø§Øª Ø§Ù„ÙŠÙˆÙ…</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="reviewedRecords">0</div>
                        <div class="stat-label">ØªÙ…Øª Ù…Ø±Ø§Ø¬Ø¹ØªÙ‡Ø§</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="pendingReview">0</div>
                        <div class="stat-label">Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</div>
                    </div>
                </div>
                
                <!-- Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…ØªØ·ÙˆØ± -->
                <div class="search-container">
                    <div class="search-header">
                        <h2 class="search-title">
                            <i class="fas fa-search"></i>
                            Ø¨Ø­Ø« Ù…ØªÙ‚Ø¯Ù…
                        </h2>
                        <div class="search-results-count" id="searchResultsCount">0 Ù†ØªÙŠØ¬Ø©</div>
                    </div>
                    
                    <div class="search-input-container">
                        <input type="text" class="search-input" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨Ø©ØŒ Ø§Ù„ØµÙØŒ Ø§Ù„Ø´Ø¹Ø¨Ø©ØŒ Ø£Ùˆ Ø§Ù„Ø­Ø§Ù„Ø©...">
                        <i class="fas fa-search search-icon"></i>
                        <button class="search-clear" id="searchClear">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <div class="search-filters">
                        <!-- ØªÙ… Ø§Ø³ØªØ¨Ø¯Ø§Ù„ ÙÙ„ØªØ± Ø§Ù„ØµÙ Ø¨ÙÙ„ØªØ± Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© -->
                        <div class="filter-group">
                            <label class="filter-label">Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</label>
                            <select class="filter-select" id="filterReview">
                                <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø§Ù„Ø§Øª</option>
                                <option value="reviewed">ØªÙ…Øª Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</option>
                                <option value="pending">Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label class="filter-label">Ø§Ù„Ø´Ø¹Ø¨Ø©</label>
                            <select class="filter-select" id="filterSection">
                                <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø´Ø¹Ø¨</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label class="filter-label">Ø§Ù„Ø­Ø§Ù„Ø©</label>
                            <select class="filter-select" id="filterStatus">
                                <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø§Ù„Ø§Øª</option>
                                <option value="ØºÙŠØ§Ø¨">ØºÙŠØ§Ø¨</option>
                                <option value="ØªØ£Ø®ÙŠØ± Ø¹Ù† Ø§Ù„Ø­ØµØ©">ØªØ£Ø®ÙŠØ± Ø¹Ù† Ø§Ù„Ø­ØµØ©</option>
                                <option value="ØªØ³ÙŠÙ‘ÙØ¨ Ù…Ù† Ø§Ù„Ø­ØµØ©">ØªØ³ÙŠÙ‘ÙØ¨ Ù…Ù† Ø§Ù„Ø­ØµØ©</option>
                                <option value="Ø¥Ø³ØªØ£Ø°Ø§Ù† Ø®Ø§Ø±Ø¬ Ø§Ù„Ù…Ø¯Ø±Ø³Ø©">Ø¥Ø³ØªØ£Ø°Ø§Ù† Ø®Ø§Ø±Ø¬ Ø§Ù„Ù…Ø¯Ø±Ø³Ø©</option>
                            </select>
                        </div>
                        
                       <div class="filter-group">
    <label class="filter-label">Ø§Ù„ØªØ§Ø±ÙŠØ®</label>
    <select class="filter-select" id="filterDate">
        <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªÙˆØ§Ø±ÙŠØ®</option>
        <option value="week">Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹</option>
        <option value="month">Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±</option>
    </select>
</div>
                    </div>
                </div>
                
                <div class="tabs">
                    <div class="tab active" data-tab="today">Ø³Ø¬Ù„Ø§Øª Ø§Ù„ÙŠÙˆÙ…</div>
                    <div class="tab" data-tab="all">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø³Ø¬Ù„Ø§Øª</div>
                </div>
                
                <div class="tab-content active" id="todayTab">
                    <div class="records-table-container">
                        <table class="records-table">
                            <thead>
                                <tr>
                                    <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                                    <th>Ø§Ù„ÙŠÙˆÙ…</th>
                                    <th>ÙˆÙ‚Øª Ø§Ù„ØªØ³Ø¬ÙŠÙ„</th>
                                    <th>Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨Ø©</th>
                                    <th>Ø§Ù„ØµÙ</th>
                                    <th>Ø§Ù„Ø´Ø¹Ø¨Ø©</th>
                                    <th>Ø§Ù„Ø­ØµØ©</th>
                                    <th>Ù‡Ø§ØªÙ ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±</th>
                                    <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                                    <th>Ù…Ù„Ø§Ø­Ø¸Ø©</th>
                                    <th>Ø§Ù„Ù…Ø±ÙÙ‚</th>
                                    <th>Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</th>
                                    <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                                </tr>
                            </thead>
                            <tbody id="todayRecordsBody"></tbody>
                        </table>
                    </div>
                    <div id="todayEmptyState" class="empty-state" style="display: none;">
                        <i class="fas fa-clipboard-list"></i>
                        <h3>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø³Ø¬Ù„Ø§Øª Ù„Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ…</h3>
                        <p>Ù„Ù… ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø£ÙŠ Ø­Ø§Ù„Ø§Øª ØºÙŠØ§Ø¨ Ø£Ùˆ ØªØ£Ø®ÙŠØ± Ù„Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ….</p>
                    </div>
                </div>
                
                <div class="tab-content" id="allTab">
                    <div class="records-table-container">
                        <table class="records-table">
                            <thead>
                                <tr>
                                    <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                                    <th>Ø§Ù„ÙŠÙˆÙ…</th>
                                    <th>ÙˆÙ‚Øª Ø§Ù„ØªØ³Ø¬ÙŠÙ„</th>
                                    <th>Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨Ø©</th>
                                    <th>Ø§Ù„ØµÙ</th>
                                    <th>Ø§Ù„Ø´Ø¹Ø¨Ø©</th>
                                    <th>Ø§Ù„Ø­ØµØ©</th>
                                    <th>Ù‡Ø§ØªÙ ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±</th>
                                    <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                                    <th>Ù…Ù„Ø§Ø­Ø¸Ø©</th>
                                    <th>Ø§Ù„Ù…Ø±ÙÙ‚</th>
                                    <th>Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</th>
                                    <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                                </tr>
                            </thead>
                            <tbody id="allRecordsBody"></tbody>
                        </table>
                    </div>
                    <div id="allEmptyState" class="empty-state" style="display: none;">
                        <i class="fas fa-clipboard-list"></i>
                        <h3>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø³Ø¬Ù„Ø§Øª</h3>
                        <p>Ù„Ù… ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø£ÙŠ Ø­Ø§Ù„Ø§Øª ØºÙŠØ§Ø¨ Ø£Ùˆ ØªØ£Ø®ÙŠØ± Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <p>Ù†Ø¸Ø§Ù… Ø§Ù„ØºÙŠØ§Ø¨ Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠ - Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Â© 2025</p>
        </div>
    </footer>

    <script>
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbz_hp07h8KIWLbOiwBhDHXdK76QisSLWt8SNxI4ZjEByOJsWRdI1xTQcE9ESxfLgbEy4g/exec';
        let allRecords = [];
        let filteredRecords = [];
        let searchTimeout = null;
        let currentEditRecord = null;

        // Ø¹Ù†Ø§ØµØ± DOM
        const searchInput = document.getElementById('searchInput');
        const searchClear = document.getElementById('searchClear');
        const filterReview = document.getElementById('filterReview');
        const filterSection = document.getElementById('filterSection');
        const filterStatus = document.getElementById('filterStatus');
        const filterDate = document.getElementById('filterDate');
        const searchResultsCount = document.getElementById('searchResultsCount');
        const editModal = document.getElementById('editModal');
        const editForm = document.getElementById('editForm');
        const editRecordId = document.getElementById('editRecordId');
        const editStudentName = document.getElementById('editStudentName');
        const editParentPhone = document.getElementById('editParentPhone');
        const editPeriod = document.getElementById('editPeriod');
        const editStatus = document.getElementById('editStatus');
        const editNotes = document.getElementById('editNotes');
        const cancelEditBtn = document.getElementById('cancelEditBtn');
        const saveEditBtn = document.getElementById('saveEditBtn');

        // âœ… Ø¯ÙˆØ§Ù„ Ø§Ù„Ø®Ø§Ø¯Ù… - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø­Ø³Ù†Ø© Ù…Ø¹ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©
        async function callGoogleScript(action, data = {}, retries = 3) {
            const params = new URLSearchParams();
            params.append('action', action);
            
            for (const key in data) {
                if (data[key] !== null && data[key] !== undefined) {
                    params.append(key, data[key]);
                }
            }
            
            for (let attempt = 1; attempt <= retries; attempt++) {
                try {
                    console.log(`ğŸ“¤ Ù…Ø­Ø§ÙˆÙ„Ø© ${attempt}/${retries} - Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ ${action}`);
                    
                    const controller = new AbortController();
                    const timeoutId = setTimeout(() => controller.abort(), 30000); // 30 Ø«Ø§Ù†ÙŠØ© timeout
                    
                    const response = await fetch(SCRIPT_URL, {
                        method: 'POST',
                        body: params,
                        signal: controller.signal
                    });
                    
                    clearTimeout(timeoutId);
                    
                    if (!response.ok) {
                        throw new Error(`Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„: ${response.status} ${response.statusText}`);
                    }
                    
                    const result = await response.json();
                    
                    if (!result.success) {
                        throw new Error(result.error || 'Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ');
                    }
                    
                    console.log(`âœ… Ù†Ø¬Ø§Ø­ ÙÙŠ ${action} - Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© ${attempt}`);
                    return result.data;
                    
                } catch (error) {
                    console.error(`âŒ ÙØ´Ù„ ÙÙŠ ${action} - Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© ${attempt}:`, error);
                    
                    if (attempt === retries) {
                        if (error.name === 'AbortError') {
                            throw new Error('Ø§Ù†ØªÙ‡Øª Ù…Ù‡Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª ÙˆØ§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
                        } else if (error.message.includes('Failed to fetch')) {
                            throw new Error('ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª ÙˆØ§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
                        } else {
                            throw new Error(`ÙØ´Ù„ ÙÙŠ ${action === 'updateRecord' ? 'ØªØ­Ø¯ÙŠØ«' : 'Ø­Ø°Ù'} Ø§Ù„Ø³Ø¬Ù„: ${error.message}`);
                        }
                    }
                    
                    // Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ù‚Ø¨Ù„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© (Ø²ÙŠØ§Ø¯Ø© Ù…ØªØ¯Ø±Ø¬Ø©)
                    await new Promise(resolve => setTimeout(resolve, 1000 * attempt));
                }
            }
        }

        // âœ… ÙØ­Øµ Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„
        async function checkConnection() {
            try {
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), 10000); // 10 Ø«ÙˆØ§Ù†ÙŠ ÙƒØ­Ø¯ Ø£Ù‚ØµÙ‰
                
                const response = await fetch(SCRIPT_URL, {
                    method: 'POST',
                    body: new URLSearchParams({ action: 'getStats' }),
                    signal: controller.signal
                });
                
                clearTimeout(timeoutId);
                return response.ok;
            } catch (error) {
                console.error('âŒ ÙØ´Ù„ ÙÙŠ ÙØ­Øµ Ø§Ù„Ø§ØªØµØ§Ù„:', error);
                return false;
            }
        }
// âœ… Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙƒØ¨Ù‘Ø±Ø©
function showZoomOverlay(url) {
  let overlay = document.getElementById("zoomOverlay");
  if (!overlay) {
    overlay = document.createElement("div");
    overlay.id = "zoomOverlay";
    overlay.className = "zoom-overlay";
    document.body.appendChild(overlay);
  }

  overlay.innerHTML = `
    <img src="${url}" alt="Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ØµÙˆØ±Ø©">
    <button class="zoom-close-btn">Ø¥ØºÙ„Ø§Ù‚ âœ•</button>
  `;

  overlay.querySelector(".zoom-close-btn").addEventListener("click", () => {
    overlay.classList.remove("show");
  });

  overlay.classList.add("show");
}

// âœ… Ø¯Ø§Ù„Ø© Ø¹Ø§Ù…Ø© Ù„ÙØªØ­ Ø§Ù„Ù…Ø±ÙÙ‚Ø§Øª (ØªØ¹Ù…Ù„ Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„Ø¬Ù‡Ø§Ø²)
function handleAttachmentClick(url) {
  const isImage = /\.(jpg|jpeg|png|gif|bmp|webp)$/i.test(url) || url.toLowerCase().includes("googleusercontent");
  const isPDF = url.toLowerCase().includes(".pdf");

  const isMobile = /Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent);

  if (isMobile) {
    if (isImage) {
      showZoomOverlay(url);
    } else if (isPDF) {
      window.open(url, "_blank");
    }
  } else {
    // ÙÙŠ Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±: ÙÙ‚Ø· ÙØªØ­ Ø§Ù„Ù…Ù„Ù Ø£Ùˆ Ø¹Ø±Ø¶Ù‡ Ø¨Ø§Ù„Ù…Ø±ÙˆØ±
    if (isPDF) window.open(url, "_blank");
  }
}

// âœ… ØªÙƒØ¨ÙŠØ± Ø¹Ù†Ø¯ Ø§Ù„Ù…Ø±ÙˆØ± Ù„Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± ÙÙ‚Ø·
document.addEventListener("mouseover", (e) => {
  const isMobile = /Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
  if (isMobile) return; // Ù„Ø§ ØªØ·Ø¨Ù‚ Ø¹Ù„Ù‰ Ø§Ù„Ø¬ÙˆØ§Ù„

  const thumb = e.target.closest(".attachment-thumbnail");
  if (thumb) {
    const url = thumb.src;
    if (url) {
      // Ø¹Ø±Ø¶ Ù…Ø¤Ù‚Øª Ø¹Ù†Ø¯ Ø§Ù„Ù…Ø±ÙˆØ±
      let overlay = document.getElementById("hoverPreview");
      if (!overlay) {
        overlay = document.createElement("div");
        overlay.id = "hoverPreview";
        overlay.className = "zoom-overlay";
        overlay.style.background = "rgba(0,0,0,0.5)";
        document.body.appendChild(overlay);
      }
      overlay.innerHTML = `<img src="${url}" alt="ØªÙƒØ¨ÙŠØ±">`;
      overlay.classList.add("show");

      thumb.addEventListener("mouseleave", () => {
        overlay.classList.remove("show");
      }, { once: true });
    }
  }
});

// âœ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØ± ÙˆÙ…Ù„ÙØ§Øª PDF ÙÙŠ ÙƒÙ„ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©
document.addEventListener("click", (e) => {
  const thumb = e.target.closest(".attachment-thumbnail, .file-preview");
  if (!thumb) return;

  let url = "";

  if (thumb.classList.contains("attachment-thumbnail")) {
    url = thumb.src;
  } else if (thumb.classList.contains("file-preview")) {
    const onclickAttr = thumb.getAttribute("onclick") || "";
    const match = onclickAttr.match(/openAttachment\('(.*?)'\)/);
    url = match ? match[1] : "";
  }

  if (url) handleAttachmentClick(url);
});
        // âœ… Ø¹Ø±Ø¶ Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„
        function showConnectionStatus(isConnected) {
            const existingStatus = document.getElementById('connectionStatus');
            if (existingStatus) {
                existingStatus.remove();
            }
            
            if (!isConnected) {
                const statusElement = document.createElement('div');
                statusElement.id = 'connectionStatus';
                statusElement.innerHTML = `
                    <div style="
                        position: fixed;
                        top: 10px;
                        left: 50%;
                        transform: translateX(-50%);
                        background: #e63946;
                        color: white;
                        padding: 10px 20px;
                        border-radius: 5px;
                        z-index: 10000;
                        box-shadow: 0 2px 10px rgba(0,0,0,0.2);
                        font-weight: bold;
                    ">
                        <i class="fas fa-wifi"></i> 
                        Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ - ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª
                    </div>
                `;
                document.body.appendChild(statusElement);
                
                // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ØªØ¨Ù„ÙŠØº Ø¨Ø¹Ø¯ 5 Ø«ÙˆØ§Ù†ÙŠ
                setTimeout(() => {
                    if (statusElement.parentNode) {
                        statusElement.remove();
                    }
                }, 5000);
            }
        }
function showZoomPreview(url) {
  let overlay = document.getElementById("zoomOverlay");
  if (!overlay) {
    overlay = document.createElement("div");
    overlay.id = "zoomOverlay";
    overlay.className = "zoom-overlay";
    overlay.addEventListener("click", () => overlay.classList.remove("show"));
    document.body.appendChild(overlay);
  }

  const lower = url.toLowerCase();
  const isImage = /\.(jpg|jpeg|png|gif|bmp|webp)$/i.test(lower) || lower.includes('googleusercontent');
  const isPDF = lower.includes('.pdf');

  overlay.innerHTML = isImage
    ? `<img src="${url}" alt="Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ØµÙˆØ±Ø©">`
    : isPDF
      ? `<iframe src="${url}" frameborder="0"></iframe>`
      : `<div style="color:white;font-size:1.3rem;font-weight:bold">Ù„Ø§ ÙŠÙ…ÙƒÙ† Ù…Ø¹Ø§ÙŠÙ†Ø© Ù‡Ø°Ø§ Ø§Ù„Ù†ÙˆØ¹ Ù…Ù† Ø§Ù„Ù…Ù„ÙØ§Øª</div>`;

  overlay.classList.add("show");
}

// âœ… Ø¹Ù†Ø¯ Ø§Ù„Ù…Ø±ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØ±Ø© Ø£Ùˆ Ù…Ù„Ù Ø§Ù„Ù€ PDF
document.addEventListener("mouseover", (e) => {
  const thumb = e.target.closest(".attachment-thumbnail, .file-preview");
  if (!thumb) return;

  let url = "";

  // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª ØµÙˆØ±Ø© Ù…ØµØºÙ‘Ø±Ø©
  if (thumb.classList.contains("attachment-thumbnail")) {
    url = thumb.src;
  }

  // Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…Ù„Ù PDF Ø¯Ø§Ø®Ù„ div.file-preview
  if (!url && thumb.classList.contains("file-preview")) {
    // Ù†Ø­Ø§ÙˆÙ„ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø±Ø§Ø¨Ø· Ù…Ù† onclick Ø£Ùˆ Ù…Ù† Ø£Ù‚Ø±Ø¨ container
    const container = thumb.closest(".attachment-container");
    const img = container?.querySelector("img");
    const onclickAttr = thumb.getAttribute("onclick") || "";
    const match = onclickAttr.match(/openAttachment\('(.*?)'\)/);
    url = match ? match[1] : "";
  }

  // ÙÙŠ Ø­Ø§Ù„ Ù„Ù… ÙŠØ¬Ø¯ URLØŒ Ù†ØªÙˆÙ‚Ù
  if (!url) return;

  // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©
  showZoomPreview(url);
});
        // âœ… Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© Ø§Ù„Ù…Ø®ØµØµØ© - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø­Ø³Ù†Ø©
        function showCustomAlert(message, title = 'ØªÙ†Ø¨ÙŠÙ‡', type = 'info') {
            return new Promise((resolve) => {
                // Ø¥Ø²Ø§Ù„Ø© Ø£ÙŠ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø³Ø§Ø¨Ù‚Ø©
                const existingAlert = document.getElementById('custom-alert-overlay');
                if (existingAlert) {
                    existingAlert.remove();
                }

                const icons = {
                    info: 'fa-info-circle',
                    success: 'fa-check-circle',
                    warning: 'fa-exclamation-triangle',
                    error: 'fa-times-circle'
                };

                const colors = {
                    info: '#4361ee',
                    success: '#4cc9f0', 
                    warning: '#f72585',
                    error: '#e63946'
                };

                const alertHTML = `
                    <div class="custom-alert-overlay" id="custom-alert-overlay">
                        <div class="custom-alert">
                            <div class="custom-alert-header" style="background: linear-gradient(135deg, ${colors[type]}, ${colors[type]});">
                                <i class="fas ${icons[type]}"></i>
                                <h3 class="custom-alert-title">${title}</h3>
                            </div>
                            <div class="custom-alert-body">
                                <div class="custom-alert-message">${message}</div>
                                <div class="custom-alert-buttons">
                                    <button class="custom-alert-btn custom-alert-btn-primary" id="custom-alert-ok">Ù…ÙˆØ§ÙÙ‚</button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;

                document.body.insertAdjacentHTML('beforeend', alertHTML);
                
                const overlay = document.getElementById('custom-alert-overlay');
                const okBtn = document.getElementById('custom-alert-ok');
                
                setTimeout(() => overlay.classList.add('show'), 10);
                
                const closeAlert = () => {
                    overlay.classList.remove('show');
                    setTimeout(() => {
                        if (overlay.parentNode) {
                            overlay.remove();
                        }
                        resolve(true);
                    }, 300);
                };
                
                okBtn.addEventListener('click', closeAlert);
                overlay.addEventListener('click', (e) => {
                    if (e.target === overlay) closeAlert();
                });
                
                // Ø¥ØºÙ„Ø§Ù‚ Ø¨Ø§Ù„Ø²Ø± ESC
                const handleEscape = (e) => {
                    if (e.key === 'Escape') closeAlert();
                };
                document.addEventListener('keydown', handleEscape);
                
                // ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ù…ÙˆØ§ÙÙ‚
                setTimeout(() => okBtn.focus(), 300);
                
                // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù…Ø³ØªÙ…Ø¹ Ø¹Ù†Ø¯ Ø§Ù„Ø¥ØºÙ„Ø§Ù‚
                overlay.addEventListener('transitionend', () => {
                    if (!overlay.classList.contains('show')) {
                        document.removeEventListener('keydown', handleEscape);
                    }
                });
            });
        }

        // âœ… Ù†Ø¸Ø§Ù… ØªØ£ÙƒÙŠØ¯ Ù…Ø®ØµØµ - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø­Ø³Ù†Ø©
        function showCustomConfirm(message, title = 'ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©') {
            return new Promise((resolve) => {
                // Ø¥Ø²Ø§Ù„Ø© Ø£ÙŠ ØªØ£ÙƒÙŠØ¯Ø§Øª Ø³Ø§Ø¨Ù‚Ø©
                const existingConfirm = document.getElementById('custom-confirm-overlay');
                if (existingConfirm) {
                    existingConfirm.remove();
                }

                const confirmHTML = `
                    <div class="custom-confirm-overlay" id="custom-confirm-overlay">
                        <div class="custom-confirm">
                            <div class="custom-confirm-icon">
                                <i class="fas fa-exclamation"></i>
                            </div>
                            <div class="custom-confirm-message">${message}</div>
                            <div class="custom-confirm-buttons">
                                <button class="custom-alert-btn custom-alert-btn-secondary" id="custom-confirm-cancel">Ø¥Ù„ØºØ§Ø¡</button>
                                <button class="custom-alert-btn custom-alert-btn-danger" id="custom-confirm-ok">Ù†Ø¹Ù…ØŒ ØªØ£ÙƒÙŠØ¯</button>
                            </div>
                        </div>
                    </div>
                `;

                document.body.insertAdjacentHTML('beforeend', confirmHTML);
                
                const overlay = document.getElementById('custom-confirm-overlay');
                const cancelBtn = document.getElementById('custom-confirm-cancel');
                const okBtn = document.getElementById('custom-confirm-ok');
                
                setTimeout(() => overlay.classList.add('show'), 10);
                
                const closeConfirm = (result) => {
                    overlay.classList.remove('show');
                    setTimeout(() => {
                        if (overlay.parentNode) {
                            overlay.remove();
                        }
                        resolve(result);
                    }, 300);
                };
                
                cancelBtn.addEventListener('click', () => closeConfirm(false));
                okBtn.addEventListener('click', () => closeConfirm(true));
                overlay.addEventListener('click', (e) => {
                    if (e.target === overlay) closeConfirm(false);
                });
                
                // Ø¥ØºÙ„Ø§Ù‚ Ø¨Ø§Ù„Ø²Ø± ESC
                const handleEscape = (e) => {
                    if (e.key === 'Escape') closeConfirm(false);
                };
                document.addEventListener('keydown', handleEscape);
                
                // ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ø¥Ù„ØºØ§Ø¡ Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹
                setTimeout(() => cancelBtn.focus(), 300);
                
                // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù…Ø³ØªÙ…Ø¹ Ø¹Ù†Ø¯ Ø§Ù„Ø¥ØºÙ„Ø§Ù‚
                overlay.addEventListener('transitionend', () => {
                    if (!overlay.classList.contains('show')) {
                        document.removeEventListener('keydown', handleEscape);
                    }
                });
            });
        }

        // âœ… Ø±Ø³Ø§Ù„Ø© Ù†Ø¬Ø§Ø­ Ø³Ø±ÙŠØ¹Ø© - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø­Ø³Ù†Ø©
        function showQuickSuccess(message) {
            // Ø¥Ø²Ø§Ù„Ø© Ø£ÙŠ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø³Ø§Ø¨Ù‚Ø©
            const existingNotifications = document.querySelectorAll('.custom-notification');
            existingNotifications.forEach(notification => {
                notification.remove();
            });
            
            const notification = document.createElement('div');
            notification.className = 'custom-notification notification-success';
            notification.innerHTML = `
                <div class="notification-content">
                    <div class="notification-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="notification-message">${message}</div>
                    <button class="notification-close" onclick="this.parentElement.parentElement.remove()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
            setTimeout(() => {
                notification.classList.add('show');
            }, 10);
            
            // Ø¥Ø®ÙØ§Ø¡ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¨Ø¹Ø¯ 3 Ø«ÙˆØ§Ù†ÙŠ
            setTimeout(() => {
                notification.classList.remove('show');
                notification.classList.add('hide');
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.remove();
                    }
                }, 400);
            }, 3000);
        }

        // âœ… Ø§Ù„Ø¨Ø­Ø« Ø§Ù„ÙÙˆØ±ÙŠ Ø¨Ø¯ÙˆÙ† ØªØ£Ø®ÙŠØ±
       function performSearch() {
    const searchTerm = searchInput.value.trim().toLowerCase();
    const reviewFilter = filterReview.value;
    const sectionFilter = filterSection.value;
    const statusFilter = filterStatus.value;
    const dateFilter = filterDate.value;
    
    filteredRecords = allRecords.filter(record => {
        // ØªØ·Ø¨ÙŠÙ‚ ÙÙ„ØªØ± Ø§Ù„Ù†Øµ
        if (searchTerm) {
            const searchFields = [
                record.studentName,
                record.class,
                record.section,
                record.status,
                record.date,
                record.day,
                record.period,
                record.notes
            ];
            
            const matchesSearch = searchFields.some(field => 
                field && field.toString().toLowerCase().includes(searchTerm)
            );
            
            if (!matchesSearch) return false;
        }
        
        // ØªØ·Ø¨ÙŠÙ‚ ÙÙ„ØªØ± Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯
        if (reviewFilter) {
            if (reviewFilter === 'reviewed' && !record.reviewed) return false;
            if (reviewFilter === 'pending' && record.reviewed) return false;
        }
        
        // ØªØ·Ø¨ÙŠÙ‚ ÙÙ„ØªØ± Ø§Ù„Ø´Ø¹Ø¨Ø©
        if (sectionFilter && record.section !== sectionFilter) return false;
        
        // ØªØ·Ø¨ÙŠÙ‚ ÙÙ„ØªØ± Ø§Ù„Ø­Ø§Ù„Ø©
        if (statusFilter && record.status !== statusFilter) return false;
        
        // ØªØ·Ø¨ÙŠÙ‚ ÙÙ„ØªØ± Ø§Ù„ØªØ§Ø±ÙŠØ® - ØªÙ… Ø§Ù„ØªØµØ­ÙŠØ­ Ù‡Ù†Ø§
        if (dateFilter) {
            const recordDate = convertToISODate(record.date);
            if (!recordDate) return false;
            
            const today = new Date();
            const recordDateObj = new Date(recordDate);
            
            switch (dateFilter) {
                case 'week':
                    const startOfWeek = new Date(today);
                    startOfWeek.setDate(today.getDate() - today.getDay());
                    startOfWeek.setHours(0, 0, 0, 0);
                    
                    const endOfWeek = new Date(startOfWeek);
                    endOfWeek.setDate(startOfWeek.getDate() + 6);
                    endOfWeek.setHours(23, 59, 59, 999);
                    
                    if (recordDateObj < startOfWeek || recordDateObj > endOfWeek) return false;
                    break;
                    
                case 'month':
                    if (recordDateObj.getMonth() !== today.getMonth() || 
                        recordDateObj.getFullYear() !== today.getFullYear()) return false;
                    break;
            }
        }
        
        return true;
    });
    
    updateDisplay();
    
    // ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø¯ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
    searchResultsCount.textContent = `${filteredRecords.length} Ù†ØªÙŠØ¬Ø©`;
    if (searchTerm) {
        searchResultsCount.style.display = 'block';
    } else {
        searchResultsCount.style.display = 'none';
    }
}

        // âœ… ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø´Ø¹Ø¨ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„ØµÙ Ø§Ù„Ù…Ø®ØªØ§Ø±
        function updateSectionsList() {
            const sections = new Set();
            
            // Ø¬Ù…Ø¹ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø´Ø¹Ø¨ Ø§Ù„Ù…ØªØ§Ø­Ø©
            allRecords.forEach(record => {
                sections.add(record.section);
            });
            
            // ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø´Ø¹Ø¨
            filterSection.innerHTML = '<option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø´Ø¹Ø¨</option>';
            sections.forEach(section => {
                const option = document.createElement('option');
                option.value = section;
                option.textContent = section;
                filterSection.appendChild(option);
            });
        }

        // âœ… ØªÙ…ÙŠÙŠØ² Ø§Ù„Ù†Øµ Ø§Ù„Ù…Ø·Ø§Ø¨Ù‚
        function highlightText(text, searchTerm) {
            if (!searchTerm || !text) return text || '';
            try {
                const escapedTerm = searchTerm.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                const regex = new RegExp(`(${escapedTerm})`, 'gi');
                return text.toString().replace(regex, '<span class="highlight">$1</span>');
            } catch (e) {
                return text || '';
            }
        }

        // âœ… ØªØ­Ø¯ÙŠØ¯ ÙØ¦Ø© Ø§Ù„Ø­Ø§Ù„Ø© Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹
        function getStatusClass(status) {
            switch(status) {
                case 'ØºÙŠØ§Ø¨': return 'absence';
                case 'ØªØ£Ø®ÙŠØ± Ø¹Ù† Ø§Ù„Ø­ØµØ©': return 'tasyeeb';
                case 'ØªØ³ÙŠÙ‘ÙØ¨ Ù…Ù† Ø§Ù„Ø­ØµØ©': return 'tasayob';
                case 'Ø¥Ø³ØªØ£Ø°Ø§Ù† Ø®Ø§Ø±Ø¬ Ø§Ù„Ù…Ø¯Ø±Ø³Ø©': return 'esteathan';
                default: return 'absence';
            }
        }

        // âœ… Ø¯Ø§Ù„Ø© Ù„Ù„ØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ù„Ù ØµÙˆØ±Ø©
        function isImageFile(attachmentUrl) {
            if (!attachmentUrl) return false;
            
            const urlLower = attachmentUrl.toLowerCase();
            
            // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ± Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ù…Ù† Google
            if (urlLower.includes('lh3.googleusercontent.com')) {
                return true;
            }
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù…ØªØ¯Ø§Ø¯Ø§Øª Ø§Ù„ØµÙˆØ±
            return (urlLower.includes('.jpg') || 
                    urlLower.includes('.jpeg') || 
                    urlLower.includes('.png') || 
                    urlLower.includes('.gif') ||
                    urlLower.includes('.bmp') || 
                    urlLower.includes('.webp'));
        }

        // âœ… Ø¯Ø§Ù„Ø© Ù„ØªØ­Ø¯ÙŠØ¯ Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù…Ø±ÙÙ‚
        function getAttachmentIcon(attachmentUrl) {
            if (!attachmentUrl) return 'fa-file';
            
            const urlLower = attachmentUrl.toLowerCase();
            
            // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ± Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ù…Ù† Google
            if (urlLower.includes('lh3.googleusercontent.com')) {
                return 'fa-image';
            }
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù…ØªØ¯Ø§Ø¯ Ø§Ù„Ù…Ù„Ù
            if (urlLower.includes('.jpg') || urlLower.includes('.jpeg') || 
                urlLower.includes('.png') || urlLower.includes('.gif') ||
                urlLower.includes('.bmp') || urlLower.includes('.webp')) {
                return 'fa-image';
            } else if (urlLower.includes('.pdf')) {
                return 'fa-file-pdf';
            } else if (urlLower.includes('.doc') || urlLower.includes('.docx')) {
                return 'fa-file-word';
            } else {
                return 'fa-file';
            }
        }

        // âœ… Ø¹Ø±Ø¶ Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ù…Ø±ÙÙ‚ Ø¹Ù†Ø¯ Ù…Ø±ÙˆØ± Ø§Ù„Ù…Ø§ÙˆØ³
        function showAttachmentPreview(recordId, attachmentUrl, studentName) {
            const isImage = isImageFile(attachmentUrl);
            const previewElement = document.getElementById(`preview-${recordId}`);
            
            if (!previewElement) return;
            
            if (isImage) {
                // Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ØµÙˆØ±Ø©
                previewElement.innerHTML = `
                    <div style="text-align: center;">
                        <div class="preview-student-name">
                            <i class="fas fa-user-graduate"></i>
                            ${studentName}
                        </div>
                        <img src="${attachmentUrl}" 
                             alt="Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ØµÙˆØ±Ø©" 
                             class="preview-image"
                             onerror="this.style.display='none'">
                        <div style="margin-top: 8px; font-size: 0.8rem; color: var(--gray);">
                            <i class="fas fa-expand"></i>
                            Ø§Ù†Ù‚Ø± Ù„Ù„ØªÙƒØ¨ÙŠØ±
                        </div>
                    </div>
                `;
            } else {
                // Ù…Ø¹Ø§ÙŠÙ†Ø© PDF Ø£Ùˆ Ù…Ù„Ù Ø¢Ø®Ø±
                const isPDF = attachmentUrl.toLowerCase().includes('.pdf');
                const fileType = isPDF ? 'PDF' : 'Ù…Ù„Ù';
                const icon = isPDF ? 'fa-file-pdf' : 'fa-file';
                const color = isPDF ? '#e63946' : 'var(--primary)';
                
                previewElement.innerHTML = `
                    <div class="preview-pdf" style="border-color: ${color};">
                        <i class="fas ${icon} preview-pdf-icon" style="color: ${color};"></i>
                        <div class="preview-pdf-text" style="color: ${color};">
                            ${fileType}
                        </div>
                        <div class="preview-file-name">
                            ${getFileNameFromUrl(attachmentUrl)}
                        </div>
                        <div class="preview-student-name">
                            <i class="fas fa-user-graduate"></i>
                            ${studentName}
                        </div>
                        <div style="margin-top: 8px; font-size: 0.8rem; color: var(--gray);">
                            <i class="fas fa-external-link-alt"></i>
                            Ø§Ù†Ù‚Ø± Ù„ÙØªØ­ Ø§Ù„Ù…Ù„Ù
                        </div>
                    </div>
                `;
            }
            
            previewElement.classList.add('show');
        }

        // âœ… Ø¥Ø®ÙØ§Ø¡ Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ù…Ø±ÙÙ‚
        function hideAttachmentPreview(recordId) {
            const previewElement = document.getElementById(`preview-${recordId}`);
            if (previewElement) {
                previewElement.classList.remove('show');
            }
        }

        // âœ… ÙØªØ­ Ø§Ù„Ù…Ø±ÙÙ‚ ÙÙŠ Ù†Ø§ÙØ°Ø© Ø¬Ø¯ÙŠØ¯Ø©
        function openAttachment(attachmentUrl) {
            window.open(attachmentUrl, '_blank');
        }

        // âœ… Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ø³Ù… Ø§Ù„Ù…Ù„Ù Ù…Ù† Ø§Ù„Ø±Ø§Ø¨Ø·
        function getFileNameFromUrl(url) {
            try {
                const path = new URL(url).pathname;
                return path.split('/').pop() || 'Ø§Ù„Ù…Ù„Ù';
            } catch (e) {
                return 'Ø§Ù„Ù…Ù„Ù';
            }
        }

       // âœ… ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…ØµØ­Ø­Ø©
async function toggleReviewStatus(recordId) {
    try {
        const record = allRecords.find(r => r.id === recordId);
        if (record) {
            // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø­Ø§Ù„Ø©
            record.reviewed = !record.reviewed;
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© ÙÙˆØ±Ø§Ù‹
            updateDisplay();
            
            // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªØ­Ø¯ÙŠØ« Ù„Ù„Ø®Ø§Ø¯Ù…
            await callGoogleScript('toggleReviewStatus', { id: recordId });
            
            // Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©
            if (record.reviewed) {
                showQuickSuccess('ØªÙ… ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø³Ø¬Ù„ ÙƒÙ…ÙØ±Ø§Ø¬ÙØ¹ âœ“');
            } else {
                showQuickSuccess('ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø³Ø¬Ù„');
            }
        }
    } catch (error) {
        // ÙÙŠ Ø­Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£ØŒ Ù†Ø¹ÙŠØ¯ Ø§Ù„Ø­Ø§Ù„Ø© Ø¥Ù„Ù‰ Ù…Ø§ ÙƒØ§Ù†Øª Ø¹Ù„ÙŠÙ‡
        const record = allRecords.find(r => r.id === recordId);
        if (record) {
            record.reviewed = !record.reviewed;
            updateDisplay();
        }
        showCustomAlert('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©', 'Ø®Ø·Ø£', 'error');
    }
}
        // âœ… ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„
       function openEditModal(recordId) {
    const record = allRecords.find(r => r.id === recordId);
    if (!record) return;
    
    currentEditRecord = record;
    editRecordId.value = record.id;
    editStudentName.value = record.studentName;
    editParentPhone.value = record.parentPhone;
    editPeriod.value = record.period || '';
    editStatus.value = record.status;
    editNotes.value = record.notes || '';
    
    // ØªÙØ¹ÙŠÙ„ Ø­Ù‚Ù„ ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø± ÙˆØ¬Ø¹Ù„Ù‡ Ù‚Ø§Ø¨Ù„Ø§Ù‹ Ù„Ù„ØªØ¹Ø¯ÙŠÙ„
    editParentPhone.removeAttribute('readonly');
    editParentPhone.disabled = false;
    
    editModal.classList.add('show');
    
    // ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ø£ÙˆÙ„ Ø­Ù‚Ù„
    setTimeout(() => {
        editStudentName.focus();
    }, 300);
}

        // âœ… Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„
        function closeEditModal() {
            editModal.classList.remove('show');
            currentEditRecord = null;
        }

        // âœ… Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø­Ø³Ù†Ø©
        async function saveEditChanges(e) {
            e.preventDefault();
            
            try {
                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                if (!editStudentName.value.trim()) {
                    showCustomAlert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨Ø©', 'Ø®Ø·Ø£', 'error');
                    editStudentName.focus();
                    return;
                }
                
                const phoneValue = editParentPhone.value.trim();
                if (!phoneValue) {
                    showCustomAlert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±', 'Ø®Ø·Ø£', 'error');
                    editParentPhone.focus();
                    return;
                }
                
                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø§Ù„Ø±Ù‚Ù… ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ 8 Ø£Ø±Ù‚Ø§Ù… ÙÙ‚Ø·
                if (!/^\d{8}$/.test(phoneValue)) {
                    showCustomAlert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ù‡Ø§ØªÙ ØµØ­ÙŠØ­ (8 Ø£Ø±Ù‚Ø§Ù… ÙÙ‚Ø·)', 'Ø®Ø·Ø£', 'error');
                    editParentPhone.focus();
                    editParentPhone.select();
                    return;
                }
                
                const updatedData = {
                    id: editRecordId.value,
                    studentName: editStudentName.value.trim(),
                    parentPhone: phoneValue,
                    period: editPeriod.value,
                    status: editStatus.value,
                    notes: editNotes.value.trim()
                };
                
                // Ø¥Ø¸Ù‡Ø§Ø± Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
                const originalText = saveEditBtn.innerHTML;
                saveEditBtn.innerHTML = '<div class="loading" style="display: inline-block; width: 16px; height: 16px; margin-left: 8px;"></div> Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...';
                saveEditBtn.disabled = true;
                
                // Ø¥Ø¹Ø·Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ù„Ø§Ø­Ø¸Ø© Ø¹Ù† Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø­ÙØ¸
                showQuickSuccess('Ø¬Ø§Ø±ÙŠ Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª...');
                
                await callGoogleScript('updateRecord', updatedData);
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©
                if (currentEditRecord) {
                    currentEditRecord.studentName = updatedData.studentName;
                    currentEditRecord.parentPhone = updatedData.parentPhone;
                    currentEditRecord.period = updatedData.period;
                    currentEditRecord.status = updatedData.status;
                    currentEditRecord.notes = updatedData.notes;
                }
                
                closeEditModal();
                updateDisplay();
                showQuickSuccess('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³Ø¬Ù„ Ø¨Ù†Ø¬Ø§Ø­');
                
            } catch (error) {
                console.error('Error updating record:', error);
                
                // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø®Ø·Ø£ Ø£ÙƒØ«Ø± ÙˆØ¶ÙˆØ­Ø§Ù‹
                let errorMessage = 'Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³Ø¬Ù„: ';
                if (error.message.includes('Ø§Ù†ØªÙ‡Øª Ù…Ù‡Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„') || error.message.includes('ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„')) {
                    errorMessage += 'ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª ÙˆØ§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.';
                } else {
                    errorMessage += error.message;
                }
                
                showCustomAlert(errorMessage, 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­ÙØ¸', 'error');
            } finally {
                // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø²Ø± Ø§Ù„Ø­ÙØ¸
                saveEditBtn.innerHTML = 'Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª';
                saveEditBtn.disabled = false;
            }
        }

        // âœ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
        function updateStatistics() {
            const today = new Date().toISOString().split('T')[0];
            const todayRecords = filteredRecords.filter(record => {
                const recordDate = convertToISODate(record.date);
                return recordDate === today;
            });
            const reviewedRecords = filteredRecords.filter(record => record.reviewed);
            const pendingReview = filteredRecords.filter(record => !record.reviewed);
            
            document.getElementById('totalRecords').textContent = filteredRecords.length;
            document.getElementById('todayRecordsCount').textContent = todayRecords.length;
            document.getElementById('reviewedRecords').textContent = reviewedRecords.length;
            document.getElementById('pendingReview').textContent = pendingReview.length;
        }

        // âœ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø±Ø¶
        function updateDisplay() {
            const activeTab = document.querySelector('.tab.active').getAttribute('data-tab');
            
            if (activeTab === 'today') {
                displayTodayRecords();
            } else {
                displayAllRecords();
            }
            
            updateStatistics();
        }

        // âœ… Ø¹Ø±Ø¶ Ø³Ø¬Ù„Ø§Øª Ø§Ù„ÙŠÙˆÙ… - Ù…Ø¹ Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯
        function displayTodayRecords() {
            const today = new Date().toISOString().split('T')[0];
            const todayRecords = filteredRecords.filter(record => {
                const recordDate = convertToISODate(record.date);
                return recordDate === today;
            });
            
            const tbody = document.getElementById('todayRecordsBody');
            const emptyState = document.getElementById('todayEmptyState');
            
            if (todayRecords.length === 0) {
                emptyState.style.display = 'block';
                tbody.innerHTML = '';
            } else {
                emptyState.style.display = 'none';
                const searchTerm = searchInput.value.toLowerCase();
                
                tbody.innerHTML = todayRecords.map(record => {
                    const statusClass = getStatusClass(record.status);
                    return `
                    <tr>
                        <td class="expandable">${highlightText(record.date, searchTerm)}</td>
                        <td class="expandable">${highlightText(record.day, searchTerm)}</td>
                        <td>${record.time}</td>
                        <td class="expandable">${highlightText(record.studentName, searchTerm)}</td>
                        <td>${highlightText(record.class, searchTerm)}</td>
                        <td>${highlightText(record.section, searchTerm)}</td>
                        <td>${highlightText(record.period, searchTerm)}</td>
                        <td class="expandable">968${record.parentPhone}</td>
                        <td><span class="status-badge status-${statusClass}">${highlightText(record.status, searchTerm)}</span></td>
                        <td class="expandable">${highlightText(record.notes, searchTerm)}</td>
                        <td>
                            <div id="attachmentCell-${record.id}" style="text-align: center;">
                                ${record.attachment ? 
                                    `<div class="attachment-container" 
                                          onmouseenter="showAttachmentPreview('${record.id}', '${record.attachment}', '${record.studentName}')" 
                                          onmouseleave="hideAttachmentPreview('${record.id}')">
                                        
                                        ${isImageFile(record.attachment) ? 
                                            `<img src="${record.attachment}" 
                                                  alt="Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ØµÙˆØ±Ø©" 
                                                  class="attachment-thumbnail"
                                                  onclick="openAttachment('${record.attachment}')">` 
                                            : 
                                            `<div class="file-preview" onclick="openAttachment('${record.attachment}')">
                                                <i class="fas ${getAttachmentIcon(record.attachment)} file-icon"></i>
                                                <span class="file-text">PDF</span>
                                            </div>`
                                        }
                                        
                                        <!-- Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ØªÙƒØ¨ÙŠØ± -->
                                        <div id="preview-${record.id}" class="attachment-preview-tooltip"></div>
                                        
                                    </div>` 
                                    : 'Ù„Ø§ ÙŠÙˆØ¬Ø¯'
                                }
                            </div>
                        </td>
                        <td>
                            <span class="reviewed-badge ${record.reviewed ? 'reviewed-yes' : 'reviewed-no'}">
                                ${record.reviewed ? 'Ø¨Ù€Ø¹Ù€Ø°Ø±' : 'Ø¨Ù€Ø¯ÙˆÙ† Ø¹Ù€Ø°Ø±'}
                            </span>
                        </td>
                        <td>
                            <div class="action-buttons">
                                <button class="btn-icon btn-edit" onclick="openEditModal('${record.id}')" title="ØªØ¹Ø¯ÙŠÙ„">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn-icon btn-whatsapp" onclick="sendWhatsAppMessage('${record.id}')" title="Ø¥Ø±Ø³Ø§Ù„ ÙˆØ§ØªØ³Ø§Ø¨">
                                    <i class="fab fa-whatsapp"></i>
                                </button>
                                <button class="btn-icon ${record.reviewed ? 'btn-unreview' : 'btn-review'}" 
                                    onclick="toggleReviewStatus('${record.id}')" 
                                    title="${record.reviewed ? 'Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©' : 'ØªÙ…Øª Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©'}">
                                    <i class="fas ${record.reviewed ? 'fa-check' : 'fa-times'}"></i>
                                </button>
                                <button class="btn-icon btn-delete" onclick="deleteRecord('${record.id}', event)" title="Ø­Ø°Ù Ø§Ù„Ø³Ø¬Ù„">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                    `;
                }).join('');
            }
        }

        // âœ… Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø³Ø¬Ù„Ø§Øª - Ù…Ø¹ Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯
        function displayAllRecords() {
            const tbody = document.getElementById('allRecordsBody');
            const emptyState = document.getElementById('allEmptyState');
            
            if (filteredRecords.length === 0) {
                emptyState.style.display = 'block';
                tbody.innerHTML = '';
            } else {
                emptyState.style.display = 'none';
                const sortedRecords = [...filteredRecords].reverse();
                const searchTerm = searchInput.value.toLowerCase();
                
                tbody.innerHTML = sortedRecords.map(record => {
                    const statusClass = getStatusClass(record.status);
                    return `
                    <tr>
                        <td class="expandable">${highlightText(record.date, searchTerm)}</td>
                        <td class="expandable">${highlightText(record.day, searchTerm)}</td>
                        <td>${record.time}</td>
                        <td class="expandable">${highlightText(record.studentName, searchTerm)}</td>
                        <td>${highlightText(record.class, searchTerm)}</td>
                        <td>${highlightText(record.section, searchTerm)}</td>
                        <td>${highlightText(record.period, searchTerm)}</td>
                        <td class="expandable">968${record.parentPhone}</td>
                        <td><span class="status-badge status-${statusClass}">${highlightText(record.status, searchTerm)}</span></td>
                        <td class="expandable">${highlightText(record.notes, searchTerm)}</td>
                        <td>
                            <div id="attachmentCell-${record.id}" style="text-align: center;">
                                ${record.attachment ? 
                                    `<div class="attachment-container" 
                                          onmouseenter="showAttachmentPreview('${record.id}', '${record.attachment}', '${record.studentName}')" 
                                          onmouseleave="hideAttachmentPreview('${record.id}')">
                                        
                                        ${isImageFile(record.attachment) ? 
                                            `<img src="${record.attachment}" 
                                                  alt="Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ØµÙˆØ±Ø©" 
                                                  class="attachment-thumbnail"
                                                  onclick="openAttachment('${record.attachment}')">` 
                                            : 
                                            `<div class="file-preview" onclick="openAttachment('${record.attachment}')">
                                                <i class="fas ${getAttachmentIcon(record.attachment)} file-icon"></i>
                                                <span class="file-text">PDF</span>
                                            </div>`
                                        }
                                        
                                        <!-- Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ØªÙƒØ¨ÙŠØ± -->
                                        <div id="preview-${record.id}" class="attachment-preview-tooltip"></div>
                                        
                                    </div>` 
                                    : 'Ù„Ø§ ÙŠÙˆØ¬Ø¯'
                                }
                            </div>
                        </td>
                        <td>
                            <span class="reviewed-badge ${record.reviewed ? 'reviewed-yes' : 'reviewed-no'}">
                                ${record.reviewed ? 'Ø¨Ù€Ø¹Ù€Ø°Ø±' : 'Ø¨Ø¯ÙˆÙ† Ø¹Ù€Ø°Ø±'}
                            </span>
                        </td>
                        <td>
                            <div class="action-buttons">
                                <button class="btn-icon btn-edit" onclick="openEditModal('${record.id}')" title="ØªØ¹Ø¯ÙŠÙ„">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn-icon btn-whatsapp" onclick="sendWhatsAppMessage('${record.id}')" title="Ø¥Ø±Ø³Ø§Ù„ ÙˆØ§ØªØ³Ø§Ø¨">
                                    <i class="fab fa-whatsapp"></i>
                                </button>
                                <button class="btn-icon ${record.reviewed ? 'btn-unreview' : 'btn-review'}" 
                                    onclick="toggleReviewStatus('${record.id}')" 
                                    title="${record.reviewed ? 'Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©' : 'ØªÙ…Øª Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©'}">
                                    <i class="fas ${record.reviewed ? 'fa-check' : 'fa-times'}"></i>
                                </button>
                                <button class="btn-icon btn-delete" onclick="deleteRecord('${record.id}', event)" title="Ø­Ø°Ù Ø§Ù„Ø³Ø¬Ù„">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                    `;
                }).join('');
            }
        }

        // âœ… Ø­Ø°Ù Ø§Ù„Ø³Ø¬Ù„ Ù…Ø¹ Ø±Ø³Ø§Ù„Ø© ØªØ£ÙƒÙŠØ¯ Ù…Ø®ØµØµØ© - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…ØµØ­Ø­Ø©
        async function deleteRecord(recordId, event = null) {
            const record = allRecords.find(r => r.id === recordId);
            if (!record) {
                showCustomAlert('Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨', 'Ø®Ø·Ø£', 'error');
                return;
            }
            
            try {
                // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© ØªØ£ÙƒÙŠØ¯ Ù…Ø®ØµØµØ©
                const confirmation = await showCustomConfirm(
                    `Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø³Ø¬Ù„ Ø§Ù„Ø·Ø§Ù„Ø¨Ø© "<strong>${record.studentName}</strong>"ØŸ<br><br><small style="color: #666;">Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.</small>`,
                    'ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°Ù'
                );
                
                if (!confirmation) return;
                
                // Ø¥Ø¸Ù‡Ø§Ø± Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø¥Ø°Ø§ ÙƒØ§Ù† event Ù…ØªØ§Ø­Ø§Ù‹
                let deleteBtn = null;
                if (event && event.target) {
                    deleteBtn = event.target.closest('.btn-delete');
                    if (deleteBtn) {
                        const originalHTML = deleteBtn.innerHTML;
                        deleteBtn.innerHTML = '<div class="loading" style="display: inline-block; width: 14px; height: 14px;"></div>';
                        deleteBtn.disabled = true;
                    }
                }
                
                // ØªÙ†ÙÙŠØ° Ø§Ù„Ø­Ø°Ù
                await callGoogleScript('deleteRecord', { id: recordId });
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©
                allRecords = allRecords.filter(r => r.id !== recordId);
                filteredRecords = filteredRecords.filter(r => r.id !== recordId);
                
                updateDisplay();
                showQuickSuccess(`ØªÙ… Ø­Ø°Ù Ø³Ø¬Ù„ Ø§Ù„Ø·Ø§Ù„Ø¨Ø© ${record.studentName} Ø¨Ù†Ø¬Ø§Ø­`);
                
            } catch (error) {
                console.error('Error deleting record:', error);
                showCustomAlert('Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ø³Ø¬Ù„: ' + error.message, 'Ø®Ø·Ø£', 'error');
                
                // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø²Ø± Ø¥Ø°Ø§ ÙƒØ§Ù† event Ù…ØªØ§Ø­Ø§Ù‹
                if (event && event.target) {
                    const deleteBtn = event.target.closest('.btn-delete');
                    if (deleteBtn) {
                        deleteBtn.innerHTML = '<i class="fas fa-trash"></i>';
                        deleteBtn.disabled = false;
                    }
                }
            }
        }

        // âœ… Ø§Ù„ØªÙ‡ÙŠØ¦Ø© - ØªÙ… Ø§Ù„ØªØ­Ø³ÙŠÙ†
        document.addEventListener('DOMContentLoaded', function() {
            loadRecords();
            
            // ØªØ¨ÙˆÙŠØ¨Ø§Øª
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    
                    this.classList.add('active');
                    const tabId = this.getAttribute('data-tab');
                    document.getElementById(`${tabId}Tab`).classList.add('active');
                    
                    performSearch();
                });
            });
            
            // Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ÙÙ„Ø§ØªØ±
            searchInput.addEventListener('input', handleSearchInput);
            searchClear.addEventListener('click', clearSearch);
            filterReview.addEventListener('change', performSearch);
            filterSection.addEventListener('change', performSearch);
            filterStatus.addEventListener('change', performSearch);
            filterDate.addEventListener('change', performSearch);
            
            // Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ø£Ø­Ø¯Ø§Ø« Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ - ØªÙ… Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø±Ø¨Ø·
            if (editForm) {
                editForm.addEventListener('submit', saveEditChanges);
            }
            if (cancelEditBtn) {
                cancelEditBtn.addEventListener('click', closeEditModal);
            }
            
            // Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
            if (editModal) {
                editModal.addEventListener('click', function(e) {
                    if (e.target === editModal) {
                        closeEditModal();
                    }
                });
            }
            
            // Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø¨Ø§Ù„Ø²Ø± ESC
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && editModal.classList.contains('show')) {
                    closeEditModal();
                }
            });

            // ÙØ­Øµ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
            checkConnection().then(isConnected => {
                showConnectionStatus(isConnected);
            });

            // ÙØ­Øµ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¯ÙˆØ±ÙŠØ§Ù‹ ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø©
            setInterval(async () => {
                const isConnected = await checkConnection();
                showConnectionStatus(isConnected);
            }, 60000);
        });

        // âœ… Ø§Ù„Ø¨Ø­Ø« Ø§Ù„ÙÙˆØ±ÙŠ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ÙƒØªØ§Ø¨Ø©
        function handleSearchInput() {
            const searchTerm = searchInput.value;
            
            const searchIcon = document.querySelector('.search-icon');
            if (searchTerm) {
                searchIcon.style.color = 'var(--primary)';
            }
            
            if (searchTimeout) {
                clearTimeout(searchTimeout);
            }
            
            // Ø¨Ø­Ø« ÙÙˆØ±ÙŠ Ø¨Ø¯ÙˆÙ† ØªØ£Ø®ÙŠØ±
            searchTimeout = setTimeout(() => {
                performSearch();
                searchIcon.style.color = 'var(--gray)';
            }, 50);
        }

        // âœ… Ù…Ø³Ø­ Ø­Ù‚Ù„ Ø§Ù„Ø¨Ø­Ø«
        function clearSearch() {
            searchInput.value = '';
            searchClear.classList.remove('visible');
            performSearch();
            searchInput.focus();
        }

        // âœ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³Ø¬Ù„Ø§Øª - ØªÙ… Ø§Ù„ØªØµØ­ÙŠØ­ Ù‡Ù†Ø§
        async function loadRecords() {
            try {
                document.getElementById('todayRecordsBody').innerHTML = `
                    <tr>
                        <td colspan="13" style="text-align: center; padding: 2rem;">
                            <div class="loading"></div>
                            <div style="margin-top: 1rem;">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³Ø¬Ù„Ø§Øª...</div>
                        </td>
                    </tr>
                `;
                
                document.getElementById('allRecordsBody').innerHTML = `
                    <tr>
                        <td colspan="13" style="text-align: center; padding: 2rem;">
                            <div class="loading"></div>
                            <div style="margin-top: 1rem;">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³Ø¬Ù„Ø§Øª...</div>
                        </td>
                    </tr>
                `;

                const [todayRecordsData, allRecordsData] = await Promise.all([
                    callGoogleScript('getTodayRecords'),
                    callGoogleScript('getRecords')
                ]);
                
                allRecords = allRecordsData;
                filteredRecords = [...allRecords];
                
                // ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø´Ø¹Ø¨
                updateSectionsList();
                
                updateStatistics();
                updateDisplay();
                
            } catch (error) {
                showCustomAlert('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³Ø¬Ù„Ø§Øª', 'Ø®Ø·Ø£', 'error');
            }
        }

       function convertToISODate(dateString) {
    if (!dateString) return '';
    try {
        if (dateString.includes('/')) {
            const parts = dateString.split('/');
            if (parts.length === 3) {
                const day = parts[0].padStart(2, '0');
                const month = parts[1].padStart(2, '0');
                const year = parts[2];
                return `${year}-${month}-${day}`;
            }
        }
        return dateString;
    } catch (e) {
        console.error('Error converting date:', e);
        return '';
    }
}

// âœ… Ø¯Ø§Ù„Ø© Ø¥Ø±Ø³Ø§Ù„ ÙˆØ§ØªØ³Ø§Ø¨ - Ù…Ø­Ø¯Ø«Ø© Ù…Ø¹ Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ø³Ø·ÙˆØ±
function sendWhatsAppMessage(recordId) {
    try {
        const record = allRecords.find(r => r.id === recordId);
        if (!record) {
            showCustomAlert('Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨', 'Ø®Ø·Ø£', 'error');
            return;
        }
        
        const phoneNumber = `968${record.parentPhone}`;
        const statusMessage = getStatusMessage(record.status);
        const message = `Ø§Ù„Ø³Ù„Ø§Ù… Ø¹Ù„ÙŠÙƒÙ… .
Ø§Ù„ÙØ§Ø¶Ù„/ ÙˆÙ„ÙŠ Ø£Ù…Ø± Ø§Ù„Ø·Ø§Ù„Ø¨Ø©. ${record.studentName}..
Ù†ÙÙŠØ¯ÙƒÙ… Ø¨Ø£Ù† Ø¥Ø¨Ù†ØªÙƒÙ… Ù‚Ø¯ ${statusMessage}
Ø¨ØªØ§Ø±ÙŠØ® ${record.date} Ù„Ù„Ø¹Ù„Ù… Ø¨Ø°Ù„Ùƒ .
Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¯Ø±Ø³Ø©`;
        
        // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø±Ø³Ù…ÙŠ Ù„ÙˆØ§ØªØ³Ø§Ø¨
        const whatsappUrl = `https://api.whatsapp.com/send?phone=${phoneNumber}&text=${encodeURIComponent(message)}`;
        
        // ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø¬Ø¯ÙŠØ¯Ø© Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
        window.open(whatsappUrl, '_blank', 'width=600,height=700');
        
        // Ø¥Ø´Ø¹Ø§Ø± Ù†Ø¬Ø§Ø­
        showQuickSuccess('ØªÙ… ÙØªØ­ ØªØ·Ø¨ÙŠÙ‚ ÙˆØ§ØªØ³Ø§Ø¨ Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©');
        
    } catch (error) {
        console.error('Error in WhatsApp sending:', error);
        showCustomAlert('Ø®Ø·Ø£ ÙÙŠ ÙØªØ­ ØªØ·Ø¨ÙŠÙ‚ ÙˆØ§ØªØ³Ø§Ø¨', 'Ø®Ø·Ø£', 'error');
    }
}

function getStatusMessage(status) {
    switch(status) {
        case 'ØºÙŠØ§Ø¨': return 'ØªØºÙŠØ¨Øª Ø¹Ù† Ø§Ù„Ù…Ø¯Ø±Ø³Ø©.';
        case 'ØªØ£Ø®ÙŠØ± Ø¹Ù† Ø§Ù„Ø­ØµØ©': return 'ØªØ£Ø®Ø±Øª Ø¹Ù† Ø§Ù„Ø­ØµØ©.';
        case 'ØªØ³ÙŠÙ‘ÙØ¨ Ù…Ù† Ø§Ù„Ø­ØµØ©': return 'ØªØ³ÙŠØ¨Øª Ù…Ù† Ø§Ù„Ø­ØµØ©.';
        case 'Ø¥Ø³ØªØ£Ø°Ø§Ù† Ø®Ø§Ø±Ø¬ Ø§Ù„Ù…Ø¯Ø±Ø³Ø©': return 'Ø£Ø³ØªØ£Ø°Ù†Øª Ø®Ø§Ø±Ø¬ Ø§Ù„Ù…Ø¯Ø±Ø³Ø©.';
        default: return status + '.';
    }
}
    </script>
</body>

</html>
